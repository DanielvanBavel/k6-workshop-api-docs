"use strict";(self.webpackChunkk_6_workshop_api_docs=self.webpackChunkk_6_workshop_api_docs||[]).push([[402],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>k});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=r.createContext({}),p=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},c=function(e){var t=p(e.components);return r.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=p(n),k=o,f=d["".concat(l,".").concat(k)]||d[k]||u[k]||i;return n?r.createElement(f,a(a({ref:t},c),{},{components:n})):r.createElement(f,a({ref:t},c))}));function k(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,a=new Array(i);a[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:o,a[1]=s;for(var p=2;p<i;p++)a[p]=n[p];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},8260:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>p});var r=n(7462),o=(n(7294),n(3905));const i={sidebar_position:2},a="Uitleg testscript opzetten in k6",s={unversionedId:"k6",id:"k6",title:"Uitleg testscript opzetten in k6",description:"De testscripts die worden uitgevoerd door de gesimuleerde gebruikers (virtual users) van een performancetest in k6, worden opgesteld in JavaScript (ES6). Dit maakt het, in verhouding tot andere performancetesttools, goed integreerbaar in een pipeline en toegankelijk voor ontwikkelaars en testers.",source:"@site/docs/k6.md",sourceDirName:".",slug:"/k6",permalink:"/k6-workshop-api-docs/docs/k6",draft:!1,editUrl:"https://github.com/DanielvanBavel/k6-workshop-api-docs/docs/k6.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Introductie",permalink:"/k6-workshop-api-docs/docs/intro"},next:{title:"Stappenplan",permalink:"/k6-workshop-api-docs/docs/excercises"}},l={},p=[],c={toc:p};function u(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"uitleg-testscript-opzetten-in-k6"},"Uitleg testscript opzetten in k6"),(0,o.kt)("p",null,"De testscripts die worden uitgevoerd door de gesimuleerde gebruikers (virtual users) van een performancetest in k6, worden opgesteld in JavaScript (",(0,o.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/ECMAScript#6th_Edition_%E2%80%93_ECMAScript_2015"},"ES6"),"). Dit maakt het, in verhouding tot andere performancetesttools, goed integreerbaar in een pipeline en toegankelijk voor ontwikkelaars en testers. "),(0,o.kt)("p",null,"Er is een viertal elementen (functions) voorgedefinieerd voor gebruik in een k6 performancetestscript. Daarnaast is het mogelijk om zelf functies toe te voegen."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("b",null,"Init: (verplicht)")," Dit onderdeel bevat alle import statements. Dit kan door custom libraries, of de k6 library."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("b",null,"Setup (Optioneel):")," De setup function wordt gebruikt om voorbereidende taken uit te voeren, zoals het genereren van testdata. Deze wordt eenmalig uitgevoerd."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("b",null,"Default (verplicht):"),' De functie "export default function" is de functie dat het http request afhandelt. De opdrachten in deze sectie worden iteratief uitgevoerd zo lang de test loopt.'),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("b",null,"Teardown (Optioneel):")," De teardown functie is bedoeld om taken vanuit de setup af te sluiten zoals het verwijderen van alle testdata zodat er een leeg bestand is voor de volgende testrun.")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"//Init\nimport http from 'k6/http'\n\n//Optioneel setup\nexport function setup() {\n\n}\n\n//Default\nexport default function() {\n    http.get(\"http://www.foobar.com\")\n}\n\n//Optioneel teardown\nexport function teardown() {\n\n}\n")),(0,o.kt)("p",null,"Het commando voor het uitvoeren van een test is als volgt opgemaakt.\nk6 run (parameters) (bestandsnaam testscript)"),(0,o.kt)("b",null,"Voorbeeld:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"k6 run --vus 10 --duration 30s foo.js\n")))}u.isMDXComponent=!0}}]);