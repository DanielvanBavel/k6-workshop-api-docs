---
sidebar_position: 2
---

# Uitleg testscript opzetten in K6

De testscripts die worden uitgevoerd door de gesimuleerde gebruikers (virtual users) van een performancetest in K6, worden opgesteld in JavaScript ([ES6](https://en.wikipedia.org/wiki/ECMAScript#6th_Edition_%E2%80%93_ECMAScript_2015)). Dit maakt het, in verhouding tot andere performancetesttools, goed integreerbaar in een pipeline en toegankelijk voor ontwikkelaars en testers. 

Maar, Hoe maak je een performancetest met K6? Wat is de syntax? Dat ga ik hieronder uitleggen.

Er is een viertal elementen (functions) voorgedefinieerd voor gebruik in een K6 performancetestscript. Daarnaast is het mogelijk om zelf functies toe te voegen. 

- <b>Init:</b> Dit onderdeel bevat alle import statements. Dit kan door custom libraries, of de k6 library.
- <b>(Optioneel) Setup:</b> De setup function wordt gebruikt om voorbereidende taken uit te voeren. zoals het genereren van testdata.
- <b>Default:</b> De functie "export default function" is de functie dat het http request afhandeld.
- <b>(Optioneel) Teardown:</b> De teardown functie is bedoeld om taken vanuit de setup af te sluiten zoals het verwijderen van alle testdata zodat er een leeg bestand is voor de volgende testrun.

```javascript
//Init
import http from 'k6/http'

//Optioneel setup
export function setup() {

}

//Default
export default function() {
    http.get("http://www.foobar.com")
}

//Optioneel teardown
export function teardown() {

}
```

Parameters kunnen zowel via de command line als in het script worden meegegeven. Voorbeelden hiervan zijn: het aantal gesimuleerde gebruikers (vus) en testduur (duration). Beide parameters worden anders gedefinieerd. Vus is vast getal zoals (1, 3, 8 of 12) duration wordt uitgedrukt in tijd dus het aantal seconden, minuten of uren. Voorbeelden hiervan zijn (10s, 8m, 1h).

Het commando voor het uitvoeren van een test is als volgt opgemaakt. 
k6 run (parameters) (bestandsnaam testscript)

<b>Voorbeeld:</b>

```bash
k6 run --vus 10 --duration 30s foo.js
```