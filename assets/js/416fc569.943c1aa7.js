"use strict";(self.webpackChunkk_6_workshop_api_docs=self.webpackChunkk_6_workshop_api_docs||[]).push([[402],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>m});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=r.createContext({}),p=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=p(e.components);return r.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},c=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),c=p(n),m=o,k=c["".concat(l,".").concat(m)]||c[m]||d[m]||a;return n?r.createElement(k,i(i({ref:t},u),{},{components:n})):r.createElement(k,i({ref:t},u))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=c;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:o,i[1]=s;for(var p=2;p<a;p++)i[p]=n[p];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}c.displayName="MDXCreateElement"},8260:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>d,frontMatter:()=>a,metadata:()=>s,toc:()=>p});var r=n(7462),o=(n(7294),n(3905));const a={sidebar_position:2},i="Uitleg testscript opzetten in K6",s={unversionedId:"k6",id:"k6",title:"Uitleg testscript opzetten in K6",description:"De testscripts die worden uitgevoerd door de gesimuleerde gebruikers (virtual users) van een performancetest in K6, worden opgesteld in JavaScript (ES6). Dit maakt het, in verhouding tot andere performancetesttools, goed integreerbaar in een pipeline en toegankelijk voor ontwikkelaars en testers.",source:"@site/docs/k6.md",sourceDirName:".",slug:"/k6",permalink:"/k6-workshop-api-docs/docs/k6",draft:!1,editUrl:"https://github.com/DanielvanBavel/k6-workshop-api-docs/docs/k6.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Introductie",permalink:"/k6-workshop-api-docs/docs/intro"},next:{title:"Opdrachten",permalink:"/k6-workshop-api-docs/docs/excercises"}},l={},p=[],u={toc:p};function d(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,r.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"uitleg-testscript-opzetten-in-k6"},"Uitleg testscript opzetten in K6"),(0,o.kt)("p",null,"De testscripts die worden uitgevoerd door de gesimuleerde gebruikers (virtual users) van een performancetest in K6, worden opgesteld in JavaScript (",(0,o.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/ECMAScript#6th_Edition_%E2%80%93_ECMAScript_2015"},"ES6"),"). Dit maakt het, in verhouding tot andere performancetesttools, goed integreerbaar in een pipeline en toegankelijk voor ontwikkelaars en testers. "),(0,o.kt)("p",null,"Maar, Hoe maak je een performancetest met K6? Wat is de syntax? Dat ga ik hieronder uitleggen."),(0,o.kt)("p",null,"Er is een viertal elementen (functions) voorgedefinieerd voor gebruik in een K6 performancetestscript. Daarnaast is het mogelijk om zelf functies toe te voegen. "),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("b",null,"Init:")," Dit onderdeel bevat alle import statements. Dit kan door custom libraries, of de k6 library."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("b",null,"(Optioneel) Setup:")," De setup function wordt gebruikt om voorbereidende taken uit te voeren. zoals het genereren van testdata."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("b",null,"Default:"),' De functie "export default function" is de functie dat het http request afhandeld.'),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("b",null,"(Optioneel) Teardown:")," De teardown functie is bedoeld om taken vanuit de setup af te sluiten zoals het verwijderen van alle testdata zodat er een leeg bestand is voor de volgende testrun.")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"//Init\nimport http from 'k6/http'\n\n//Optioneel setup\nexport function setup() {\n\n}\n\n//Default\nexport default function() {\n    http.get(\"http://www.foobar.com\")\n}\n\n//Optioneel teardown\nexport function teardown() {\n\n}\n")),(0,o.kt)("p",null,"Parameters kunnen zowel via de command line als in het script worden meegegeven. Voorbeelden hiervan zijn: het aantal gesimuleerde gebruikers (vus) en testduur (duration). Beide parameters worden anders gedefinieerd. Vus is vast getal zoals (1, 3, 8 of 12) duration wordt uitgedrukt in tijd dus het aantal seconden, minuten of uren. Voorbeelden hiervan zijn (10s, 8m, 1h)."),(0,o.kt)("p",null,"Het commando voor het uitvoeren van een test is als volgt opgemaakt.\nk6 run (parameters) (bestandsnaam testscript)"),(0,o.kt)("b",null,"Voorbeeld:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"k6 run --vus 10 --duration 30s foo.js\n")))}d.isMDXComponent=!0}}]);